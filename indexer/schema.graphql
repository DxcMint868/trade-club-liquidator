type PositionOpened @entity {
  id: ID!
  positionId: BigInt!
  trader: String!
  assetId: BigInt!
  positionType: Int!
  collateral: BigInt!
  size: BigInt!
  leverage: BigInt!
  entryPrice: BigInt!
  timestamp: BigInt!
  blockNumber: BigInt!
  transactionHash: String!
  sizeToPortfolioBps: BigInt
}

type PositionClosed @entity {
  id: ID!
  positionId: BigInt!
  trader: String!
  assetId: BigInt!
  exitPrice: BigInt!
  pnl: BigInt!
  timestamp: BigInt!
  blockNumber: BigInt!
  transactionHash: String!
  sizeToPortfolioBps: BigInt
}

type PriceUpdated @entity {
  id: ID!
  assetId: BigInt!
  symbol: String!
  oldPrice: BigInt!
  newPrice: BigInt!
  timestamp: BigInt!
  blockNumber: BigInt!
  transactionHash: String!
}

type Deposited @entity {
  id: ID!
  user: String!
  amount: BigInt!
  newBalance: BigInt!
  blockNumber: BigInt!
  transactionHash: String!
  timestamp: BigInt!
}

type Withdrawn @entity {
  id: ID!
  user: String!
  amount: BigInt!
  newBalance: BigInt!
  blockNumber: BigInt!
  transactionHash: String!
  timestamp: BigInt!
}

type MatchCreated @entity {
  id: ID!
  matchId: BigInt!
  creator: String!
  entryMargin: BigInt!
  duration: BigInt!
  maxMonachads: BigInt!
  maxSupportersPerMonachad: BigInt!
  allowedDexes: [String!]!
  blockNumber: BigInt!
  transactionHash: String!
  timestamp: BigInt!
}

type MonachadJoined @entity {
  id: ID!
  matchId: BigInt!
  monachad: String!
  marginAmount: BigInt!
  entryFee: BigInt!
  blockNumber: BigInt!
  transactionHash: String!
  timestamp: BigInt!
}

type MatchVault @entity {
  id: ID!
  matchId: BigInt!
  monachad: String!
  matchVaultAddress: String!
  blockNumber: BigInt!
  transactionHash: String!
  timestamp: BigInt!
}

type MatchVaultBalance @entity {
  id: ID!
  matchId: BigInt!
  monachad: String!
  matchVaultAddress: String!
  preBalance: BigInt!
  postBalance: BigInt!
  delta: BigInt!
  changeType: Int!
  blockNumber: BigInt!
  transactionHash: String!
  timestamp: BigInt!
}

type SupporterJoined @entity {
  id: ID!
  matchId: BigInt!
  supporter: String!
  monachad: String!
  smartAccount: String!
  entryFee: BigInt!
  fundedAmount: BigInt!
  blockNumber: BigInt!
  transactionHash: String!
  timestamp: BigInt!
}

type MatchStarted @entity {
  id: ID!
  matchId: BigInt!
  startTime: BigInt!
  blockNumber: BigInt!
  transactionHash: String!
  timestamp: BigInt!
}

type MatchCompleted @entity {
  id: ID!
  matchId: BigInt!
  winner: String!
  prizeAmount: BigInt!
  blockNumber: BigInt!
  transactionHash: String!
  timestamp: BigInt!
}

type PnLUpdated @entity {
  id: ID!
  matchId: BigInt!
  participant: String!
  pnl: BigInt!
  blockNumber: BigInt!
  transactionHash: String!
  timestamp: BigInt!
}
